# MINI ERP SUPERMERCADO JPV - VERSIN 6 (PYTHON / PyQt6 / SQL SERVER)
**Estado del Proyecto:** FUNCIONAL / ESTABLE
**Fecha:** 15 de Enero 2026
**Tecnolog铆a:** Python 3.10+, PyQt6, SQL Server (LocalDB)

---

## 1. DESCRIPCIN
Sistema de gesti贸n de punto de venta (POS) y administraci贸n para supermercados en Rep煤blica Dominicana. Incluye facturaci贸n con NCF (Serie E), control de inventario, gesti贸n de clientes y reportes.

Esta versi贸n (V6) presenta una **interfaz gr谩fica moderna** con barra lateral, dashboard interactivo y estilos visuales profesionales (CSS/QDarkTheme), abandonando el dise帽o antiguo de ventanas sueltas.

## 2. INSTALACIN Y EJECUCIN

### Requisitos Previos
- Python 3.10 o superior.
- SQL Server (LocalDB o Express).
- Driver ODBC 17 for SQL Server.

### Pasos
1. **Instalar dependencias:**
   ```bash
   pip install -r requirements.txt
   ```
   *(Dependencias clave: PyQt6, pyodbc, qdarktheme, reportlab, xlsxwriter, matplotlib, qtawesome)*

2. **Base de Datos:**
   El sistema se conecta autom谩ticamente a `(localdb)\MSSQLLocalDB`.
   Si la base de datos `SUPERMERCADO_JPV_V6` no existe, ejecuta el script `setup_db_emergency.py` una sola vez para crearla.

3. **Ejecutar Aplicaci贸n:**
   ```bash
   python main.py
   ```

4. **Credenciales de Acceso:**
   - **Usuario:** `Juancito`
   - **Contrase帽a:** `123456`

---

## 3. ARQUITECTURA DEL PROYECTO (MVC)

El c贸digo est谩 organizado modularmente:

###  Estructura de Carpetas
- `main.py`: Punto de entrada.
- `database.py`: Singleton de conexi贸n a SQL Server (Windows Auth).
- `assets/`: Estilos (`styles.py`) e iconos.
- `controllers/`: L贸gica de negocio pura.
  - `auth_controller.py`: Login.
  - `products_controller.py`: CRUD Productos.
  - `client_controller.py`: CRUD Clientes.
  - `sales_controller.py`: L贸gica de Facturaci贸n.
  - `report_controller.py`: Generaci贸n PDF/Excel.
- `views/`: Interfaz Gr谩fica (PyQt6).
  - `main_window_ui.py`: Contenedor principal (Sidebar + StackedWidget).
  - `dashboard_ui.py`: Gr谩ficos y KPIs.
  - `pos_ui.py`: Facturaci贸n r谩pida.
  - `inventory_ui.py`: Gesti贸n de Productos.
  - `clients_ui.py`: Gesti贸n de Clientes.
  - `reports_ui.py`: Centro de descargas.

---

## 4. CARACTERSTICAS TCNICAS (V6)

- **UI Moderna:** Uso de `QStackedWidget` para navegaci贸n fluida sin m煤ltiples ventanas emergentes. Tema oscuro/profesional integrado.
- **Base de Datos:** SQL Server con autenticaci贸n integrada (Trusted Connection).
- **Reportes:** Generaci贸n nativa de PDFs con ReportLab y Excel con XlsxWriter.
- **Gr谩ficos:** Integraci贸n de `matplotlib` dentro de PyQt para visualizaci贸n de ventas en tiempo real.
- **Validaciones:** Control de stock antes de venta, validaci贸n de RNC (longitud) y tipos de datos.

---

## 5. NOTAS DE DESARROLLO

- Si experimenta error de conexi贸n `Login failed`, aseg煤rese de que su usuario de Windows tenga acceso a la instancia LocalDB (es el comportamiento por defecto).
- El archivo `test_integration_v6.py` permite probar toda la l贸gica de backend (BD y Controladores) sin necesidad de abrir la interfaz gr谩fica.

---
**Desarrollado por Asistente Gemini CLI.**